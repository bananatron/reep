
var taskModel = {
    summary: "",
    description: "",
    score: 0,
    focus: [],
    complete: false
}



//Show/hide new form
$('.task-new__close').on('click', function(){
  $( "#task-new" ).slideUp( "fast", function() {
    $( "#task-new" ).hide();
  });
});

$('#add-task').on('click', function(){
  $( "#task-new" ).slideDown( "fast", function(){
    $( "#task-new" ).show();
  })
});


//Task header toggle !!Review
$('.task__header').on('click', function(){
    $(this).parent().find('.task__body').toggle();
});


//Text Inputs
$('.task__input').on('keyup', function(){ //Summary-Title
  taskModel.summary = $(this).val();
})
$('.task__textarea').on('keyup', function(){ //Description
  taskModel.description = $(this).val();
})



//Focus Selection
$('.focus_option').on('click', function(){
  toggleSelected(this);
  
  //Modify model
  taskModel.focus = [];
  $('.focus_option[data-selected="true"]').each(function( ii, node ) {
    taskModel.focus.push( $(node).text() );
  });
});


//Score Selection
$('.score_option').on('click', function(){
  $('.score_option[data-selected="true"]').attr('data-selected', 'false');
  toggleSelected(this);
  taskModel.score = parseInt( $(this).text().trim() )
});


//Submit button
$('#task_submit').on('click', function(){
  if (validateModel(taskModel)){
    
  };
});





//HELPERS
var validateModel = function(model){ //Maybe put in notifications here?
  if (model.summary == "" || model.summary == undefined) return false;
  if (model.score == 0 || model.score == undefined) return false

  return true;
}

var toggleSelected = function(self){
  if ( $(self).attr('data-selected') == 'true' ) {
    $(self).attr('data-selected', 'false'); 
  } else {
    $(self).attr('data-selected', 'true'); 
  }
}


// Notifications
function Notification(text, type, trigger) {
  this.text = text;
  this.type = type || "";
  
  this.init = function(){
    var note = $("<div class='note " + this.type + "' >" + this.text + "<span class='notification__close ion-close-circled'></span></div>");
    $('.notifications').append(note);
    if (trigger){
      $(note).on('click', function(){ trigger()  })
    }
  }
  
  this.init();
}

$('.notifications').on('click', function(){
  if ($(event.target).attr('class').indexOf('note') != -1){
    $( event.target ).slideUp( 200, function() {
      $( event.target ).remove();
    })
  }
});


var ref = new Firebase("https://reep.firebaseio.com/");

//Login button
$('#user-login').on('click', function(){

  ref.authWithPassword({
    email    : $('#login-email-input').val().trim(),
    password : $('#login-pass-input').val().trim()
  }, function(error, authData) {
    if (error) {
      if (error.toString().indexOf('user does not exist') != -1){
        
        var removeYellow = function(){
          $('#user-register').addClass('bg-darkblue');
          $('#user-register').removeClass('bg-yellow');
        }
        $('#user-register').addClass('bg-yellow');
        $('#user-register').removeClass('bg-darkblue');
        
        new Notification( 
          "That user doesn't exist, but you can <span class='bg-yellow'>register</span> below with that information",'alert', removeYellow 
        );
        
      } else {
        if (authData === undefined){
          new Notification("That's not valid user info", 'alert');
        } else {
          new Notification(authData);
        }
       
      }
      
    } else {
      new Notification("Login succesful!");
    }
  });
});


//Register button
$('#user-register').on('click', function(){
  ref.createUser({
    email    : $('#login-email-input').val().trim(),
    password : $('#login-pass-input').val().trim()
  }, function(error, userData) {
    if (error) {
      new Notification(error, 'alert' );
    } else {
      console.log(userData, userData.uid);
      new Notification( "Hoorah - You've created an account!" );
    }
  });
});

//Reset email option
$('#user-resetpass').on('click', function(){
  ref.resetPassword({
      email : $('#login-email-input').val().trim(),
    }, function(error) {
    if (error === null) {
      new Notification("Password reset email sent successfully");
    } else {
      if (error.toString().indexOf('Route') != -1) {
        new Notification('Please enter your email below so we can get you reset', 'alert')
      } else {
        new Notification(error, 'alert');
      }
    }
  });
});





//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUuanMiLCJsb2dpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciB0YXNrTW9kZWwgPSB7XG4gICAgc3VtbWFyeTogXCJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICBzY29yZTogMCxcbiAgICBmb2N1czogW10sXG4gICAgY29tcGxldGU6IGZhbHNlXG59XG5cblxuXG4vL1Nob3cvaGlkZSBuZXcgZm9ybVxuJCgnLnRhc2stbmV3X19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICQoIFwiI3Rhc2stbmV3XCIgKS5zbGlkZVVwKCBcImZhc3RcIiwgZnVuY3Rpb24oKSB7XG4gICAgJCggXCIjdGFzay1uZXdcIiApLmhpZGUoKTtcbiAgfSk7XG59KTtcblxuJCgnI2FkZC10YXNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgJCggXCIjdGFzay1uZXdcIiApLnNsaWRlRG93biggXCJmYXN0XCIsIGZ1bmN0aW9uKCl7XG4gICAgJCggXCIjdGFzay1uZXdcIiApLnNob3coKTtcbiAgfSlcbn0pO1xuXG5cbi8vVGFzayBoZWFkZXIgdG9nZ2xlICEhUmV2aWV3XG4kKCcudGFza19faGVhZGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy50YXNrX19ib2R5JykudG9nZ2xlKCk7XG59KTtcblxuXG4vL1RleHQgSW5wdXRzXG4kKCcudGFza19faW5wdXQnKS5vbigna2V5dXAnLCBmdW5jdGlvbigpeyAvL1N1bW1hcnktVGl0bGVcbiAgdGFza01vZGVsLnN1bW1hcnkgPSAkKHRoaXMpLnZhbCgpO1xufSlcbiQoJy50YXNrX190ZXh0YXJlYScpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKCl7IC8vRGVzY3JpcHRpb25cbiAgdGFza01vZGVsLmRlc2NyaXB0aW9uID0gJCh0aGlzKS52YWwoKTtcbn0pXG5cblxuXG4vL0ZvY3VzIFNlbGVjdGlvblxuJCgnLmZvY3VzX29wdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIHRvZ2dsZVNlbGVjdGVkKHRoaXMpO1xuICBcbiAgLy9Nb2RpZnkgbW9kZWxcbiAgdGFza01vZGVsLmZvY3VzID0gW107XG4gICQoJy5mb2N1c19vcHRpb25bZGF0YS1zZWxlY3RlZD1cInRydWVcIl0nKS5lYWNoKGZ1bmN0aW9uKCBpaSwgbm9kZSApIHtcbiAgICB0YXNrTW9kZWwuZm9jdXMucHVzaCggJChub2RlKS50ZXh0KCkgKTtcbiAgfSk7XG59KTtcblxuXG4vL1Njb3JlIFNlbGVjdGlvblxuJCgnLnNjb3JlX29wdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICQoJy5zY29yZV9vcHRpb25bZGF0YS1zZWxlY3RlZD1cInRydWVcIl0nKS5hdHRyKCdkYXRhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gIHRvZ2dsZVNlbGVjdGVkKHRoaXMpO1xuICB0YXNrTW9kZWwuc2NvcmUgPSBwYXJzZUludCggJCh0aGlzKS50ZXh0KCkudHJpbSgpIClcbn0pO1xuXG5cbi8vU3VibWl0IGJ1dHRvblxuJCgnI3Rhc2tfc3VibWl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgaWYgKHZhbGlkYXRlTW9kZWwodGFza01vZGVsKSl7XG4gICAgXG4gIH07XG59KTtcblxuXG5cblxuXG4vL0hFTFBFUlNcbnZhciB2YWxpZGF0ZU1vZGVsID0gZnVuY3Rpb24obW9kZWwpeyAvL01heWJlIHB1dCBpbiBub3RpZmljYXRpb25zIGhlcmU/XG4gIGlmIChtb2RlbC5zdW1tYXJ5ID09IFwiXCIgfHwgbW9kZWwuc3VtbWFyeSA9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgaWYgKG1vZGVsLnNjb3JlID09IDAgfHwgbW9kZWwuc2NvcmUgPT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2VcblxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIHRvZ2dsZVNlbGVjdGVkID0gZnVuY3Rpb24oc2VsZil7XG4gIGlmICggJChzZWxmKS5hdHRyKCdkYXRhLXNlbGVjdGVkJykgPT0gJ3RydWUnICkge1xuICAgICQoc2VsZikuYXR0cignZGF0YS1zZWxlY3RlZCcsICdmYWxzZScpOyBcbiAgfSBlbHNlIHtcbiAgICAkKHNlbGYpLmF0dHIoJ2RhdGEtc2VsZWN0ZWQnLCAndHJ1ZScpOyBcbiAgfVxufVxuXG5cbi8vIE5vdGlmaWNhdGlvbnNcbmZ1bmN0aW9uIE5vdGlmaWNhdGlvbih0ZXh0LCB0eXBlLCB0cmlnZ2VyKSB7XG4gIHRoaXMudGV4dCA9IHRleHQ7XG4gIHRoaXMudHlwZSA9IHR5cGUgfHwgXCJcIjtcbiAgXG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIG5vdGUgPSAkKFwiPGRpdiBjbGFzcz0nbm90ZSBcIiArIHRoaXMudHlwZSArIFwiJyA+XCIgKyB0aGlzLnRleHQgKyBcIjxzcGFuIGNsYXNzPSdub3RpZmljYXRpb25fX2Nsb3NlIGlvbi1jbG9zZS1jaXJjbGVkJz48L3NwYW4+PC9kaXY+XCIpO1xuICAgICQoJy5ub3RpZmljYXRpb25zJykuYXBwZW5kKG5vdGUpO1xuICAgIGlmICh0cmlnZ2VyKXtcbiAgICAgICQobm90ZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKXsgdHJpZ2dlcigpICB9KVxuICAgIH1cbiAgfVxuICBcbiAgdGhpcy5pbml0KCk7XG59XG5cbiQoJy5ub3RpZmljYXRpb25zJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgaWYgKCQoZXZlbnQudGFyZ2V0KS5hdHRyKCdjbGFzcycpLmluZGV4T2YoJ25vdGUnKSAhPSAtMSl7XG4gICAgJCggZXZlbnQudGFyZ2V0ICkuc2xpZGVVcCggMjAwLCBmdW5jdGlvbigpIHtcbiAgICAgICQoIGV2ZW50LnRhcmdldCApLnJlbW92ZSgpO1xuICAgIH0pXG4gIH1cbn0pO1xuXG4iLCJ2YXIgcmVmID0gbmV3IEZpcmViYXNlKFwiaHR0cHM6Ly9yZWVwLmZpcmViYXNlaW8uY29tL1wiKTtcblxuLy9Mb2dpbiBidXR0b25cbiQoJyN1c2VyLWxvZ2luJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblxuICByZWYuYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgZW1haWwgICAgOiAkKCcjbG9naW4tZW1haWwtaW5wdXQnKS52YWwoKS50cmltKCksXG4gICAgcGFzc3dvcmQgOiAkKCcjbG9naW4tcGFzcy1pbnB1dCcpLnZhbCgpLnRyaW0oKVxuICB9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci50b1N0cmluZygpLmluZGV4T2YoJ3VzZXIgZG9lcyBub3QgZXhpc3QnKSAhPSAtMSl7XG4gICAgICAgIFxuICAgICAgICB2YXIgcmVtb3ZlWWVsbG93ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAkKCcjdXNlci1yZWdpc3RlcicpLmFkZENsYXNzKCdiZy1kYXJrYmx1ZScpO1xuICAgICAgICAgICQoJyN1c2VyLXJlZ2lzdGVyJykucmVtb3ZlQ2xhc3MoJ2JnLXllbGxvdycpO1xuICAgICAgICB9XG4gICAgICAgICQoJyN1c2VyLXJlZ2lzdGVyJykuYWRkQ2xhc3MoJ2JnLXllbGxvdycpO1xuICAgICAgICAkKCcjdXNlci1yZWdpc3RlcicpLnJlbW92ZUNsYXNzKCdiZy1kYXJrYmx1ZScpO1xuICAgICAgICBcbiAgICAgICAgbmV3IE5vdGlmaWNhdGlvbiggXG4gICAgICAgICAgXCJUaGF0IHVzZXIgZG9lc24ndCBleGlzdCwgYnV0IHlvdSBjYW4gPHNwYW4gY2xhc3M9J2JnLXllbGxvdyc+cmVnaXN0ZXI8L3NwYW4+IGJlbG93IHdpdGggdGhhdCBpbmZvcm1hdGlvblwiLCdhbGVydCcsIHJlbW92ZVllbGxvdyBcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYXV0aERhdGEgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgbmV3IE5vdGlmaWNhdGlvbihcIlRoYXQncyBub3QgdmFsaWQgdXNlciBpbmZvXCIsICdhbGVydCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpZmljYXRpb24oYXV0aERhdGEpO1xuICAgICAgICB9XG4gICAgICAgXG4gICAgICB9XG4gICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGlmaWNhdGlvbihcIkxvZ2luIHN1Y2Nlc2Z1bCFcIik7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5cbi8vUmVnaXN0ZXIgYnV0dG9uXG4kKCcjdXNlci1yZWdpc3RlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIHJlZi5jcmVhdGVVc2VyKHtcbiAgICBlbWFpbCAgICA6ICQoJyNsb2dpbi1lbWFpbC1pbnB1dCcpLnZhbCgpLnRyaW0oKSxcbiAgICBwYXNzd29yZCA6ICQoJyNsb2dpbi1wYXNzLWlucHV0JykudmFsKCkudHJpbSgpXG4gIH0sIGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgbmV3IE5vdGlmaWNhdGlvbihlcnJvciwgJ2FsZXJ0JyApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSwgdXNlckRhdGEudWlkKTtcbiAgICAgIG5ldyBOb3RpZmljYXRpb24oIFwiSG9vcmFoIC0gWW91J3ZlIGNyZWF0ZWQgYW4gYWNjb3VudCFcIiApO1xuICAgIH1cbiAgfSk7XG59KTtcblxuLy9SZXNldCBlbWFpbCBvcHRpb25cbiQoJyN1c2VyLXJlc2V0cGFzcycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIHJlZi5yZXNldFBhc3N3b3JkKHtcbiAgICAgIGVtYWlsIDogJCgnI2xvZ2luLWVtYWlsLWlucHV0JykudmFsKCkudHJpbSgpLFxuICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgaWYgKGVycm9yID09PSBudWxsKSB7XG4gICAgICBuZXcgTm90aWZpY2F0aW9uKFwiUGFzc3dvcmQgcmVzZXQgZW1haWwgc2VudCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlcnJvci50b1N0cmluZygpLmluZGV4T2YoJ1JvdXRlJykgIT0gLTEpIHtcbiAgICAgICAgbmV3IE5vdGlmaWNhdGlvbignUGxlYXNlIGVudGVyIHlvdXIgZW1haWwgYmVsb3cgc28gd2UgY2FuIGdldCB5b3UgcmVzZXQnLCAnYWxlcnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGlmaWNhdGlvbihlcnJvciwgJ2FsZXJ0Jyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pO1xuXG5cblxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=