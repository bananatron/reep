var taskModel = {
    summary: "",
    description: "",
    score: 0,
    focus: [],
    complete: false
}

//Show/hide new form
$('.task-new__close').on('click', function(){
  $( "#task-new" ).slideUp( "fast", function() {
    $( "#task-new" ).hide();
  });
});

$('#add-task').on('click', function(){
  $( "#task-new" ).slideDown( "fast", function(){
    $( "#task-new" ).show();
  })
});


//Task header toggle !!Review
$('.task__header').on('click', function(){
    $(this).parent().find('.task__body').toggle();
});


//Text Inputs
$('.task__input').on('keyup', function(){ //Summary-Title
  taskModel.summary = $(this).val();
})
$('.task__textarea').on('keyup', function(){ //Description
  taskModel.description = $(this).val();
})



//Focus Selection
$('.focus_option').on('click', function(){
  toggleSelected(this);
  
  //Modify model
  taskModel.focus = [];
  $('.focus_option[data-selected="true"]').each(function( ii, node ) {
    taskModel.focus.push( $(node).text() );
  });
});


//Score Selection
$('.score_option').on('click', function(){
  $('.score_option[data-selected="true"]').attr('data-selected', 'false');
  toggleSelected(this);
  taskModel.score = parseInt( $(this).text().trim() )
});


//Submit button
$('#task_submit').on('click', function(){
  if (validateModel(taskModel)){
    
  };
});



//////////////
// Helpers //
////////////

var validateModel = function(model){ //Maybe put in notifications here?
  if (model.summary == "" || model.summary == undefined) return false;
  if (model.score == 0 || model.score == undefined) return false

  return true;
}

var toggleSelected = function(self){
  if ( $(self).attr('data-selected') == 'true' ) {
    $(self).attr('data-selected', 'false'); 
  } else {
    $(self).attr('data-selected', 'true'); 
  }
}

var loggedIn = function loggedIn(){
  var authData = ref.getAuth();
  if (authData) {
    return true;
    console.log("User " + authData.uid + " is logged in via " + authData.provider);
  } else {
    return false;
    console.log(authData);
    console.log("User is logged out");
  }
}


//Login button
$('#user-login').on('click', function(){

  ref.authWithPassword({
    email    : $('#login-email-input').val().trim(),
    password : $('#login-pass-input').val().trim()
  }, function(error, authData) {
    if (error) {
      if (error.toString().indexOf('user does not exist') != -1){
        
        var removeYellow = function(){
          $('#user-register').addClass('bg-darkblue');
          $('#user-register').removeClass('bg-yellow');
        }
        $('#user-register').addClass('bg-yellow');
        $('#user-register').removeClass('bg-darkblue');
        
        new Notification( 
          "That user doesn't exist, but you can <span class='bg-yellow'>register</span> below with that information",'alert', removeYellow 
        );
        
      } else {
        if (authData === undefined){
          new Notification("That's not valid user info", 'alert');
        } else {
          new Notification(authData);
        }
       
      }
    } else {
      //new Notification("Login succesful!");
      window.location.href = "/";
    }
  });
});


//Register button
$('#user-register').on('click', function(){
  ref.createUser({
    email    : $('#login-email-input').val().trim(),
    password : $('#login-pass-input').val().trim()
  }, function(error, userData) {
    if (error) {
      new Notification(error, 'alert' );
    } else {
      console.log(userData, userData.uid);
      new Notification( "Hoorah - You've created an account!" );
    }
  });
});

//Reset email option
$('#user-resetpass').on('click', function(){
  ref.resetPassword({
      email : $('#login-email-input').val().trim(),
    }, function(error) {
    if (error === null) {
      new Notification("Password reset email sent successfully");
    } else {
      if (error.toString().indexOf('Route') != -1) {
        new Notification('Please enter your email below so we can get you reset', 'alert')
      } else {
        new Notification(error, 'alert');
      }
    }
  });
});





// It is of great use to the sailor to know the length of his line, 
// though he cannot with it fathom all the depths of the ocean.
//  -John Locke

/////////////////
// Navigation //
///////////////

if (loggedIn()){
  
  //Login / Logout nav
  var $loginlink = $('#login-link');
  $loginlink.children().text('Logout');
  $loginlink.on('click', function(){
    ref.unauth();
  });
  
  //Add Task
  $('#add-task').show();
}

// Every once in a while, someone will mail me a single popcorn kernel that didn't pop. 
// I'll get out a fresh kernel, tape it to a piece of paper and mail it back to them.
// - Orville Redenbacher

////////////////////
// Notifications //
//////////////////

function Notification(text, type, trigger) {
  this.text = text;
  this.type = type || "";
  
  this.init = function(){
    var note = $("<div class='note " + this.type + "' >" + this.text + "<span class='notification__close ion-close-circled'></span></div>");
    $('.notifications').append(note);
    if (trigger){
      $(note).on('click', function(){ trigger()  })
    }
  }
  
  this.init();
}

$('.notifications').on('click', function(){
  if ($(event.target).attr('class').indexOf('note') != -1){
    var nn = event.target;
    $(nn).slideUp( 200, function() {
      $(nn).remove();
    })
  }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUuanMiLCJoZWxwZXJzLmpzIiwibG9naW4uanMiLCJuYXYuanMiLCJub3RpZmljYXRpb25zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0YXNrTW9kZWwgPSB7XG4gICAgc3VtbWFyeTogXCJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICBzY29yZTogMCxcbiAgICBmb2N1czogW10sXG4gICAgY29tcGxldGU6IGZhbHNlXG59XG5cbi8vU2hvdy9oaWRlIG5ldyBmb3JtXG4kKCcudGFzay1uZXdfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgJCggXCIjdGFzay1uZXdcIiApLnNsaWRlVXAoIFwiZmFzdFwiLCBmdW5jdGlvbigpIHtcbiAgICAkKCBcIiN0YXNrLW5ld1wiICkuaGlkZSgpO1xuICB9KTtcbn0pO1xuXG4kKCcjYWRkLXRhc2snKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAkKCBcIiN0YXNrLW5ld1wiICkuc2xpZGVEb3duKCBcImZhc3RcIiwgZnVuY3Rpb24oKXtcbiAgICAkKCBcIiN0YXNrLW5ld1wiICkuc2hvdygpO1xuICB9KVxufSk7XG5cblxuLy9UYXNrIGhlYWRlciB0b2dnbGUgISFSZXZpZXdcbiQoJy50YXNrX19oZWFkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLnRhc2tfX2JvZHknKS50b2dnbGUoKTtcbn0pO1xuXG5cbi8vVGV4dCBJbnB1dHNcbiQoJy50YXNrX19pbnB1dCcpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKCl7IC8vU3VtbWFyeS1UaXRsZVxuICB0YXNrTW9kZWwuc3VtbWFyeSA9ICQodGhpcykudmFsKCk7XG59KVxuJCgnLnRhc2tfX3RleHRhcmVhJykub24oJ2tleXVwJywgZnVuY3Rpb24oKXsgLy9EZXNjcmlwdGlvblxuICB0YXNrTW9kZWwuZGVzY3JpcHRpb24gPSAkKHRoaXMpLnZhbCgpO1xufSlcblxuXG5cbi8vRm9jdXMgU2VsZWN0aW9uXG4kKCcuZm9jdXNfb3B0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgdG9nZ2xlU2VsZWN0ZWQodGhpcyk7XG4gIFxuICAvL01vZGlmeSBtb2RlbFxuICB0YXNrTW9kZWwuZm9jdXMgPSBbXTtcbiAgJCgnLmZvY3VzX29wdGlvbltkYXRhLXNlbGVjdGVkPVwidHJ1ZVwiXScpLmVhY2goZnVuY3Rpb24oIGlpLCBub2RlICkge1xuICAgIHRhc2tNb2RlbC5mb2N1cy5wdXNoKCAkKG5vZGUpLnRleHQoKSApO1xuICB9KTtcbn0pO1xuXG5cbi8vU2NvcmUgU2VsZWN0aW9uXG4kKCcuc2NvcmVfb3B0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgJCgnLnNjb3JlX29wdGlvbltkYXRhLXNlbGVjdGVkPVwidHJ1ZVwiXScpLmF0dHIoJ2RhdGEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgdG9nZ2xlU2VsZWN0ZWQodGhpcyk7XG4gIHRhc2tNb2RlbC5zY29yZSA9IHBhcnNlSW50KCAkKHRoaXMpLnRleHQoKS50cmltKCkgKVxufSk7XG5cblxuLy9TdWJtaXQgYnV0dG9uXG4kKCcjdGFza19zdWJtaXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICBpZiAodmFsaWRhdGVNb2RlbCh0YXNrTW9kZWwpKXtcbiAgICBcbiAgfTtcbn0pO1xuXG4iLCJcbi8vLy8vLy8vLy8vLy8vXG4vLyBIZWxwZXJzIC8vXG4vLy8vLy8vLy8vLy9cblxudmFyIHZhbGlkYXRlTW9kZWwgPSBmdW5jdGlvbihtb2RlbCl7IC8vTWF5YmUgcHV0IGluIG5vdGlmaWNhdGlvbnMgaGVyZT9cbiAgaWYgKG1vZGVsLnN1bW1hcnkgPT0gXCJcIiB8fCBtb2RlbC5zdW1tYXJ5ID09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICBpZiAobW9kZWwuc2NvcmUgPT0gMCB8fCBtb2RlbC5zY29yZSA9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG52YXIgdG9nZ2xlU2VsZWN0ZWQgPSBmdW5jdGlvbihzZWxmKXtcbiAgaWYgKCAkKHNlbGYpLmF0dHIoJ2RhdGEtc2VsZWN0ZWQnKSA9PSAndHJ1ZScgKSB7XG4gICAgJChzZWxmKS5hdHRyKCdkYXRhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7IFxuICB9IGVsc2Uge1xuICAgICQoc2VsZikuYXR0cignZGF0YS1zZWxlY3RlZCcsICd0cnVlJyk7IFxuICB9XG59XG5cbnZhciBsb2dnZWRJbiA9IGZ1bmN0aW9uIGxvZ2dlZEluKCl7XG4gIHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG4gIGlmIChhdXRoRGF0YSkge1xuICAgIHJldHVybiB0cnVlO1xuICAgIGNvbnNvbGUubG9nKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB2aWEgXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnNvbGUubG9nKGF1dGhEYXRhKTtcbiAgICBjb25zb2xlLmxvZyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcbiAgfVxufVxuIiwiXG4vL0xvZ2luIGJ1dHRvblxuJCgnI3VzZXItbG9naW4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXG4gIHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcbiAgICBlbWFpbCAgICA6ICQoJyNsb2dpbi1lbWFpbC1pbnB1dCcpLnZhbCgpLnRyaW0oKSxcbiAgICBwYXNzd29yZCA6ICQoJyNsb2dpbi1wYXNzLWlucHV0JykudmFsKCkudHJpbSgpXG4gIH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLnRvU3RyaW5nKCkuaW5kZXhPZigndXNlciBkb2VzIG5vdCBleGlzdCcpICE9IC0xKXtcbiAgICAgICAgXG4gICAgICAgIHZhciByZW1vdmVZZWxsb3cgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICQoJyN1c2VyLXJlZ2lzdGVyJykuYWRkQ2xhc3MoJ2JnLWRhcmtibHVlJyk7XG4gICAgICAgICAgJCgnI3VzZXItcmVnaXN0ZXInKS5yZW1vdmVDbGFzcygnYmcteWVsbG93Jyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnI3VzZXItcmVnaXN0ZXInKS5hZGRDbGFzcygnYmcteWVsbG93Jyk7XG4gICAgICAgICQoJyN1c2VyLXJlZ2lzdGVyJykucmVtb3ZlQ2xhc3MoJ2JnLWRhcmtibHVlJyk7XG4gICAgICAgIFxuICAgICAgICBuZXcgTm90aWZpY2F0aW9uKCBcbiAgICAgICAgICBcIlRoYXQgdXNlciBkb2Vzbid0IGV4aXN0LCBidXQgeW91IGNhbiA8c3BhbiBjbGFzcz0nYmcteWVsbG93Jz5yZWdpc3Rlcjwvc3Bhbj4gYmVsb3cgd2l0aCB0aGF0IGluZm9ybWF0aW9uXCIsJ2FsZXJ0JywgcmVtb3ZlWWVsbG93IFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhdXRoRGF0YSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICBuZXcgTm90aWZpY2F0aW9uKFwiVGhhdCdzIG5vdCB2YWxpZCB1c2VyIGluZm9cIiwgJ2FsZXJ0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGlmaWNhdGlvbihhdXRoRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9uZXcgTm90aWZpY2F0aW9uKFwiTG9naW4gc3VjY2VzZnVsIVwiKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvXCI7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5cbi8vUmVnaXN0ZXIgYnV0dG9uXG4kKCcjdXNlci1yZWdpc3RlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIHJlZi5jcmVhdGVVc2VyKHtcbiAgICBlbWFpbCAgICA6ICQoJyNsb2dpbi1lbWFpbC1pbnB1dCcpLnZhbCgpLnRyaW0oKSxcbiAgICBwYXNzd29yZCA6ICQoJyNsb2dpbi1wYXNzLWlucHV0JykudmFsKCkudHJpbSgpXG4gIH0sIGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgbmV3IE5vdGlmaWNhdGlvbihlcnJvciwgJ2FsZXJ0JyApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSwgdXNlckRhdGEudWlkKTtcbiAgICAgIG5ldyBOb3RpZmljYXRpb24oIFwiSG9vcmFoIC0gWW91J3ZlIGNyZWF0ZWQgYW4gYWNjb3VudCFcIiApO1xuICAgIH1cbiAgfSk7XG59KTtcblxuLy9SZXNldCBlbWFpbCBvcHRpb25cbiQoJyN1c2VyLXJlc2V0cGFzcycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIHJlZi5yZXNldFBhc3N3b3JkKHtcbiAgICAgIGVtYWlsIDogJCgnI2xvZ2luLWVtYWlsLWlucHV0JykudmFsKCkudHJpbSgpLFxuICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgaWYgKGVycm9yID09PSBudWxsKSB7XG4gICAgICBuZXcgTm90aWZpY2F0aW9uKFwiUGFzc3dvcmQgcmVzZXQgZW1haWwgc2VudCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlcnJvci50b1N0cmluZygpLmluZGV4T2YoJ1JvdXRlJykgIT0gLTEpIHtcbiAgICAgICAgbmV3IE5vdGlmaWNhdGlvbignUGxlYXNlIGVudGVyIHlvdXIgZW1haWwgYmVsb3cgc28gd2UgY2FuIGdldCB5b3UgcmVzZXQnLCAnYWxlcnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGlmaWNhdGlvbihlcnJvciwgJ2FsZXJ0Jyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pO1xuXG5cblxuXG4iLCIvLyBJdCBpcyBvZiBncmVhdCB1c2UgdG8gdGhlIHNhaWxvciB0byBrbm93IHRoZSBsZW5ndGggb2YgaGlzIGxpbmUsIFxuLy8gdGhvdWdoIGhlIGNhbm5vdCB3aXRoIGl0IGZhdGhvbSBhbGwgdGhlIGRlcHRocyBvZiB0aGUgb2NlYW4uXG4vLyAgLUpvaG4gTG9ja2VcblxuLy8vLy8vLy8vLy8vLy8vLy9cbi8vIE5hdmlnYXRpb24gLy9cbi8vLy8vLy8vLy8vLy8vL1xuXG5pZiAobG9nZ2VkSW4oKSl7XG4gIFxuICAvL0xvZ2luIC8gTG9nb3V0IG5hdlxuICB2YXIgJGxvZ2lubGluayA9ICQoJyNsb2dpbi1saW5rJyk7XG4gICRsb2dpbmxpbmsuY2hpbGRyZW4oKS50ZXh0KCdMb2dvdXQnKTtcbiAgJGxvZ2lubGluay5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgIHJlZi51bmF1dGgoKTtcbiAgfSk7XG4gIFxuICAvL0FkZCBUYXNrXG4gICQoJyNhZGQtdGFzaycpLnNob3coKTtcbn1cbiIsIi8vIEV2ZXJ5IG9uY2UgaW4gYSB3aGlsZSwgc29tZW9uZSB3aWxsIG1haWwgbWUgYSBzaW5nbGUgcG9wY29ybiBrZXJuZWwgdGhhdCBkaWRuJ3QgcG9wLiBcbi8vIEknbGwgZ2V0IG91dCBhIGZyZXNoIGtlcm5lbCwgdGFwZSBpdCB0byBhIHBpZWNlIG9mIHBhcGVyIGFuZCBtYWlsIGl0IGJhY2sgdG8gdGhlbS5cbi8vIC0gT3J2aWxsZSBSZWRlbmJhY2hlclxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gTm90aWZpY2F0aW9ucyAvL1xuLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIE5vdGlmaWNhdGlvbih0ZXh0LCB0eXBlLCB0cmlnZ2VyKSB7XG4gIHRoaXMudGV4dCA9IHRleHQ7XG4gIHRoaXMudHlwZSA9IHR5cGUgfHwgXCJcIjtcbiAgXG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIG5vdGUgPSAkKFwiPGRpdiBjbGFzcz0nbm90ZSBcIiArIHRoaXMudHlwZSArIFwiJyA+XCIgKyB0aGlzLnRleHQgKyBcIjxzcGFuIGNsYXNzPSdub3RpZmljYXRpb25fX2Nsb3NlIGlvbi1jbG9zZS1jaXJjbGVkJz48L3NwYW4+PC9kaXY+XCIpO1xuICAgICQoJy5ub3RpZmljYXRpb25zJykuYXBwZW5kKG5vdGUpO1xuICAgIGlmICh0cmlnZ2VyKXtcbiAgICAgICQobm90ZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKXsgdHJpZ2dlcigpICB9KVxuICAgIH1cbiAgfVxuICBcbiAgdGhpcy5pbml0KCk7XG59XG5cbiQoJy5ub3RpZmljYXRpb25zJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgaWYgKCQoZXZlbnQudGFyZ2V0KS5hdHRyKCdjbGFzcycpLmluZGV4T2YoJ25vdGUnKSAhPSAtMSl7XG4gICAgdmFyIG5uID0gZXZlbnQudGFyZ2V0O1xuICAgICQobm4pLnNsaWRlVXAoIDIwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKG5uKS5yZW1vdmUoKTtcbiAgICB9KVxuICB9XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==